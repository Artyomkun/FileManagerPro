<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FileManager"  
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="FileManager.MainWindow"
        Title="FileManager" 
        MinWidth="800" MinHeight="600"
        x:DataType="local:MainWindow">

    <Window.Resources>
        <local:ObjectToBoolConverter x:Key="ObjectToBoolConverter"/>
        <local:InverseBoolConverter x:Key="InverseBoolConverter"/>
        <local:IsNullConverter x:Key="IsNullConverter"/>
        <local:DateFormatConverter x:Key="DateFormatConverter"/>
        <local:FileSizeConverter x:Key="FileSizeConverter"/>
        <local:FileIconConverter x:Key="FileIconConverter"/>

        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ñ… ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
        <Style x:Key="TransparentButtonStyle">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <!-- ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²/Ð¿Ð°Ð¿Ð¾Ðº -->
        <ContextMenu x:Key="FileContextMenu">
            <MenuItem Header="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ" Click="OnOpenClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“‚" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ..." Click="OnOpenLocationClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ”§" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð’Ñ‹Ñ€ÐµÐ·Ð°Ñ‚ÑŒ" Click="OnCutClick">
                <MenuItem.Icon>
                    <TextBlock Text="âœ‚ï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" Click="OnCopyClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“‹" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Ð’ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ" Click="OnPasteClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“Ž" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿ÑƒÑ‚ÑŒ" Click="OnCopyPathClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ">
                <MenuItem.Icon>
                    <TextBlock Text="âž•" FontSize="14"/>
                </MenuItem.Icon>
                <MenuItem Header="ÐŸÐ°Ð¿ÐºÑƒ" Click="OnNewFolderClick">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚" Click="OnNewTextFileClick">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“„" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Ð¯Ñ€Ð»Ñ‹Ðº">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ”—" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Click="OnDeleteClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ—‘ï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ" Click="OnRenameClick">
                <MenuItem.Icon>
                    <TextBlock Text="âœï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°" Click="OnPropertiesClick">
                <MenuItem.Icon>
                    <TextBlock Text="âš™ï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>

        <ContextMenu x:Key="DriveContextMenu">
            <MenuItem Header="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“‚" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°">
                <MenuItem.Icon>
                    <TextBlock Text="âš™ï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ...">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ”„" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>

        <ContextMenu x:Key="EmptySpaceContextMenu">
            <MenuItem Header="Ð’ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ" Click="OnPasteClick">
                <MenuItem.Icon>
                    <TextBlock Text="ðŸ“Ž" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ">
                <MenuItem.Icon>
                    <TextBlock Text="âž•" FontSize="14"/>
                </MenuItem.Icon>
                <MenuItem Header="ÐŸÐ°Ð¿ÐºÑƒ" Click="OnNewFolderClick">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚" Click="OnNewTextFileClick">
                    <MenuItem.Icon>
                        <TextBlock Text="ðŸ“„" FontSize="14"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð’Ð¸Ð´">
                <MenuItem Header="ÐšÑ€ÑƒÐ¿Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐºÐ¸" Click="OnViewLargeIconsClick"/>
                <MenuItem Header="ÐœÐµÐ»ÐºÐ¸Ðµ Ð·Ð½Ð°Ñ‡ÐºÐ¸"/>
                <MenuItem Header="Ð¡Ð¿Ð¸ÑÐ¾Ðº"/>
                <MenuItem Header="Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð°" Click="OnViewDetailsClick"/>
                <Separator/>
                <MenuItem Header="Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°">
                    <MenuItem Header="ÐŸÐ¾ Ð¸Ð¼ÐµÐ½Ð¸"/>
                    <MenuItem Header="ÐŸÐ¾ Ñ‚Ð¸Ð¿Ñƒ"/>
                    <MenuItem Header="ÐŸÐ¾ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñƒ"/>
                    <MenuItem Header="ÐŸÐ¾ Ð´Ð°Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"/>
                </MenuItem>
                <MenuItem Header="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Click="OnRefreshClick"/>
            </MenuItem>
            <Separator/>
            <MenuItem Header="Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°" Click="OnPropertiesClick">
                <MenuItem.Icon>
                    <TextBlock Text="âš™ï¸" FontSize="14"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </Window.Resources>    
    
    <Window.Styles>
        <Style Selector="DataGridRow">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="IsVisible" Value="{Binding IsVisible}"/>
        </Style>
        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ TabControl Ð»ÐµÐ½Ñ‚Ñ‹ -->
        <Style Selector="TabControl.ribbon-tab-control">
            <Setter Property="Background" Value="#F0F0F0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>

        <Style Selector="TabControl.ribbon-tab-control /template/ TabStrip">
            <Setter Property="Background" Value="#F0F0F0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Height" Value="40"/>
        </Style>
        
        <Style Selector="Button.transparent">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <Style Selector="Button.transparent:pointerover">
            <Setter Property="Background" Value="#E5F3FF"/>
            <Setter Property="BorderBrush" Value="#CCE5FF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
    
        <Style Selector="TreeViewItem">
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Margin" Value="0"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÑŽ -->
        <Style Selector="MenuItem">
            <Setter Property="Padding" Value="10,8,20,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="MinWidth" Value="180"/>
        </Style>

        <Style Selector="MenuItem:pointerover">
            <Setter Property="Background" Value="#E5F3FF"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð² Ð»ÐµÐ½Ñ‚Ðµ -->
        <Style Selector="Button.ribbon-button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>

        <Style Selector="Button.ribbon-button:pointerover">
            <Setter Property="Background" Value="#F0F0F0"/>
            <Setter Property="BorderBrush" Value="#D0D0D0"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
        <Style Selector="Button#BackButton, Button#ForwardButton, Button#UpButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
        </Style>

        <Style Selector="Button#BackButton:pointerover, Button#ForwardButton:pointerover, Button#UpButton:pointerover">
            <Setter Property="Background" Value="#F0F0F0"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
        <Style Selector="Button#RefreshButton, Button#ViewDetailsButton, Button#ViewLargeIconsButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="4,0,2,0"/>
        </Style>

        <Style Selector="Button#RefreshButton:pointerover, Button#ViewDetailsButton:pointerover, Button#ViewLargeIconsButton:pointerover">
            <Setter Property="Background" Value="#F0F0F0"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº Ð»ÐµÐ½Ñ‚Ñ‹ -->
        <Style Selector="TabItem.ribbon-tab">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#000000"/>
        </Style>

        <Style Selector="TabItem.ribbon-tab:selected">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E5E5E5"/>
            <Setter Property="BorderThickness" Value="1,1,1,0"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ DataGrid -->
        <Style Selector="DataGridRow">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="32"/>
        </Style>
        
        <Style Selector="DataGridRow:selected">
            <Setter Property="Background" Value="#E5F3FF"/>
            <Setter Property="BorderBrush" Value="#CCE5FF"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        
        <Style Selector="DataGridRow:pointerover">
            <Setter Property="Background" Value="#F5F9FF"/>
        </Style>
    </Window.Styles>
    
    <Design.DataContext>
        <local:MainWindow />
    </Design.DataContext>
    
    <DockPanel Background="White">
        
        <!-- Ð›ÐµÐ½Ñ‚Ð° Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð½Ð¸ÐºÐ° Windows (Ribbon) -->
        <Border DockPanel.Dock="Top" Background="White" 
                BorderThickness="0,0,0,1" BorderBrush="#D1D1D1"
                x:Name="RibbonPanel">
            
            <StackPanel>
                <!-- 1. Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð²ÐºÐ»Ð°Ð´Ð¾Ðº -->
                <Border Background="#F0F0F0" 
                        BorderBrush="#D1D1D1" BorderThickness="0,0,0,1"
                        Height="40">
                    <TabControl x:Name="RibbonTabControl"
                                Background="Transparent"
                                BorderThickness="0"
                                Margin="0" 
                                Padding="0"
                                SelectedIndex="0"
                                TabStripPlacement="Top"
                                Classes="ribbon-tab-control"
                                SelectionChanged="OnRibbonTabChanged">
                        
                        <TabItem Header="Ð“Ð»Ð°Ð²Ð½Ð°Ñ" Classes="ribbon-tab"/>
                        <TabItem Header="Ð’Ð¸Ð´" Classes="ribbon-tab"/>
                        <TabItem Header="ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ" Classes="ribbon-tab"/>
                    </TabControl>
                </Border>

                <!-- 2. ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ð³Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ð²ÐºÐ»Ð°Ð´ÐºÐ¸ -->
                <ContentControl x:Name="RibbonContentControl" 
                                Height="90" 
                                Background="Transparent"/>
            </StackPanel>
        </Border>
        
        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² (Address Bar) -->
        <Border DockPanel.Dock="Top" Height="36" Background="#FFFFFF" 
                BorderThickness="0,0,0,1" BorderBrush="#D1D1D1">
            <Grid Margin="8,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="BackButton" Click="OnBackClick" ToolTip.Tip="ÐÐ°Ð·Ð°Ð´">
                        <Path Data="M8,4 L2,10 L8,16" Stroke="#333" StrokeThickness="1.5" Fill="Transparent" Stretch="Uniform" Width="12" Height="12"/>
                    </Button>
                    <Button x:Name="ForwardButton" Click="OnForwardClick" ToolTip.Tip="Ð’Ð¿ÐµÑ€ÐµÐ´">
                        <Path Data="M2,4 L8,10 L2,16" Stroke="#333" StrokeThickness="1.5" Fill="Transparent" Stretch="Uniform" Width="12" Height="12"/>
                    </Button>
                    <Button x:Name="UpButton" Click="OnUpClick" ToolTip.Tip="Ð’Ð²ÐµÑ€Ñ…">
                        <Path Data="M1,9 L7,3 L13,9 M7,3 L7,14" Stroke="#333" StrokeThickness="1.5" Fill="Transparent" Stretch="Uniform" Width="14" Height="14"/>
                    </Button>
                </StackPanel>

                <!-- ÐÐ´Ñ€ÐµÑÐ½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° -->
                <Border Grid.Column="1" Margin="10,4,10,4" 
                        BorderBrush="#D9D9D9" BorderThickness="1" 
                        Background="White" CornerRadius="3">
                    <TextBox x:Name="AddressTextBox" 
                             Text="{Binding CurrentPath}" 
                             BorderThickness="0" 
                             Background="Transparent"
                             Padding="8,0" 
                             FontSize="12"
                             Foreground="#000000"
                             KeyDown="OnAddressKeyDown"/>
                </Border>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ð¸Ð´Ð¾Ð¼ Ð¸ Ð¿Ð¾Ð¸ÑÐº -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <!-- ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ -->
                    <Button x:Name="RefreshButton" Click="OnRefreshClick" ToolTip.Tip="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ">
                        <Path Data="M1,1 A10,10 0 1,0 19,19 M19,1 L19,9 L11,9" Stroke="#333" StrokeThickness="1.5" Fill="Transparent" Stretch="Uniform"/>
                    </Button>

                    <Separator Width="1" Height="20" Margin="5,0" Background="#D1D1D1"/>

                    <!-- Ð’Ð¸Ð´: Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° (Ð¡Ð¿Ð¸ÑÐ¾Ðº) -->
                    <Button x:Name="ViewDetailsButton" Click="OnViewDetailsClick" ToolTip.Tip="Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð°">
                        <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° ÑÐ¿Ð¸ÑÐºÐ° -->
                        <Path Data="M2,2 L14,2 L14,14 L2,14 Z M5,5 L11,5 M5,8 L11,8 M5,11 L11,11" 
                              Stroke="#333" StrokeThickness="1.2" Fill="Transparent" Stretch="Uniform"/>
                    </Button>
                    
                    <!-- Ð’Ð¸Ð´: Ð—Ð½Ð°Ñ‡ÐºÐ¸ (Ð¡ÐµÑ‚ÐºÐ°) -->
                    <Button x:Name="ViewLargeIconsButton" Click="OnViewLargeIconsClick" ToolTip.Tip="ÐšÑ€ÑƒÐ¿Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐºÐ¸">
                        <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° ÑÐµÑ‚ÐºÐ¸ -->
                        <Path Data="M1,1 L6,1 L6,6 L1,6 Z M8,1 L13,1 L13,6 L8,6 Z M1,8 L6,8 L6,13 L1,13 Z M8,8 L13,8 L13,13 L8,13 Z" 
                              Stroke="#333" StrokeThickness="1.2" Fill="Transparent" Stretch="Uniform"/>
                    </Button>

                    <Separator Width="1" Height="20" Margin="5,0" Background="#D1D1D1"/>

                    <!-- ÐŸÐ¾Ð¸ÑÐº -->
                    <Border Width="200" Height="24" 
                            BorderBrush="#D9D9D9" BorderThickness="1" 
                            Background="White" CornerRadius="3" VerticalAlignment="Center">
                        <Grid>
                            <TextBlock Text="ÐŸÐ¾Ð¸ÑÐº..." FontSize="12" Foreground="Gray" 
                                       Margin="8,0,0,0" VerticalAlignment="Center" IsHitTestVisible="False"/>
                            <TextBox x:Name="SearchTextBox" 
                                     Text="" 
                                     BorderThickness="0" Background="Transparent"
                                     Foreground="#000000"
                                     Padding="8,0,5,0" FontSize="12"
                                     GotFocus="OnSearchGotFocus"
                                     LostFocus="OnSearchLostFocus"
                                     KeyDown="OnSearchKeyDown"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>
            
            <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ (Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ) -->
            <Border Grid.Column="0" BorderThickness="0,0,1,0" 
                    BorderBrush="#E5E5E5" Background="White">
                <ScrollViewer>
                    <StackPanel Margin="0,10">
                        <!-- Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ -->
                        <StackPanel Margin="10,0,10,10">
                            <TextBlock Text="Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿" 
                                       FontSize="11" FontWeight="Bold"
                                       Margin="0,0,0,5"
                                       Foreground="#444444"/>
                            
                            <Button x:Name="QuickAccessButton" 
                                    Classes="transparent"
                                    Click="OnQuickAccessClick">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“Œ" Margin="0,0,8,0"/>
                                    <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            
                            <Button Classes="transparent"
                                    Click="OnDocumentsClick">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“„" Margin="0,0,8,0"/>
                                    <TextBlock Text="Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            
                            <Button Classes="transparent"
                                    Click="OnDesktopClick">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ–¥ï¸" Margin="0,0,8,0"/>
                                    <TextBlock Text="Ð Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÑ‚Ð¾Ð»" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            
                            <Button Classes="transparent"
                                    Click="OnRecentFilesClick">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ•" Margin="0,0,8,0"/>
                                    <TextBlock Text="ÐÐµÐ´Ð°Ð²Ð½Ð¸Ðµ" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <!-- Ð¡ÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð´Ð¸ÑÐºÐ¸ -->
                        <Border Height="1" Background="#E5E5E5" Margin="10,0"/>
                        
                        <StackPanel Margin="10,10">
                            <TextBlock Text="Ð¡ÐµÑ‚ÑŒ" 
                                       FontSize="11" FontWeight="Bold"
                                       Margin="0,0,0,5"
                                       Foreground="#444444"/>
                            
                            <Button Classes="transparent"
                                    Click="OnNetworkDriveClick">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸŒ" Margin="0,0,8,0"/>
                                    <TextBlock Text="wb-tariffs-servers" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                        
                        <Border Height="1" Background="#E5E5E5" Margin="10,0"/>
                        
                        <!-- Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€ -->
                        <StackPanel Margin="10,10">
                            <TextBlock Text="Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€" 
                                       FontSize="11" FontWeight="Bold"
                                       Margin="0,0,0,5"
                                       Foreground="#444444"/>
                            
                            <!-- ÐŸÐ°Ð¿ÐºÐ¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ -->
                            <StackPanel Margin="0,0,0,10">
                                <TextBlock Text="ÐŸÐ°Ð¿ÐºÐ¸" 
                                           FontSize="10" 
                                           Margin="0,0,0,3"
                                           Foreground="#666666"/>
                                
                                <Button Classes="transparent"
                                        Click="OnVideosClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸŽ¬" Margin="0,0,8,0"/>
                                        <TextBlock Text="Ð’Ð¸Ð´ÐµÐ¾" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Classes="transparent"
                                        Click="OnDownloadsClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="â¬‡ï¸" Margin="0,0,8,0"/>
                                        <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Classes="transparent"
                                        Click="OnMusicClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸŽµ" Margin="0,0,8,0"/>
                                        <TextBlock Text="ÐœÑƒÐ·Ñ‹ÐºÐ°" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Classes="transparent"
                                        Click="OnDocumentsClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ“„" Margin="0,0,8,0"/>
                                        <TextBlock Text="Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Classes="transparent"
                                        Click="OnPicturesClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ–¼ï¸" Margin="0,0,8,0"/>
                                        <TextBlock Text="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Classes="transparent"
                                        Click="OnDesktopClick">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ–¥ï¸" Margin="0,0,8,0"/>
                                        <TextBlock Text="Ð Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÑ‚Ð¾Ð»" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <!-- Ð–ÐµÑÑ‚ÐºÐ¸Ðµ Ð´Ð¸ÑÐºÐ¸ -->
                            <StackPanel>
                                <TextBlock Text="Ð–ÐµÑÑ‚ÐºÐ¸Ðµ Ð´Ð¸ÑÐºÐ¸ (2)" 
                                           FontSize="10" 
                                           Margin="0,0,0,3"
                                           Foreground="#666666"/>
                                
                                <Button x:Name="CDriveButton" 
                                        Classes="transparent"
                                        Click="OnCDriveClick"
                                        ContextMenu="{StaticResource DriveContextMenu}"
                                        Tag="C:">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ’½" Margin="0,0,8,0"/>
                                        <StackPanel>
                                            <TextBlock Text="Windows 10 (C:)" 
                                                        VerticalAlignment="Center"/>
                                            <TextBlock x:Name="CDriveInfoTextBlock" 
                                                        Text="" 
                                                        FontSize="9" 
                                                        Foreground="Gray"
                                                        TextTrimming="CharacterEllipsis"
                                                        TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                                
                                <Button x:Name="DDriveButton" 
                                        Classes="transparent"
                                        Click="OnDDriveClick"
                                        ContextMenu="{StaticResource DriveContextMenu}"
                                        Tag="D:">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ’½" Margin="0,0,8,0"/>
                                        <StackPanel>
                                            <TextBlock Text="ÐÐ¾Ð²Ñ‹Ð¹ Ñ‚Ð¾Ð¼ (D:)" 
                                                        VerticalAlignment="Center"/>
                                            <TextBlock x:Name="DDriveInfoTextBlock" 
                                                        Text="" 
                                                        FontSize="9" 
                                                        Foreground="Gray"
                                                        TextTrimming="CharacterEllipsis"
                                                        TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ (Ñ„Ð°Ð¹Ð»Ñ‹) Ñ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ñ‹Ð¼ Ð¼ÐµÐ½ÑŽ -->
            <Border Grid.Column="1" BorderThickness="0,0,1,0" 
                    BorderBrush="#E5E5E5" Background="White"
                    ContextMenu="{StaticResource EmptySpaceContextMenu}">
                <Grid>
                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¿Ð°Ð¿ÐºÐ¸ -->
                    <Border DockPanel.Dock="Top" Height="40" 
                            Background="#F8F8F8" BorderThickness="0,0,0,1"
                            BorderBrush="#E5E5E5">
                        <TextBlock x:Name="CurrentFolderText" 
                                Text="Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€"
                                VerticalAlignment="Center"
                                Margin="15,0"
                                FontSize="12" FontWeight="SemiBold"/>
                    </Border>
                    
                    <Grid Margin="0,40,0,0">
                        <!-- DataGrid Ð´Ð»Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð²Ð¸Ð´Ð° -->
                        <DataGrid x:Name="FilesDataGrid" 
                                    ItemsSource="{Binding DriveItems}" 
                                    SelectedItem="{Binding SelectedDrive, Mode=TwoWay}"
                                    AutoGenerateColumns="False" 
                                    GridLinesVisibility="None"
                                    Background="White" 
                                    IsVisible="{Binding IsDetailsView}"
                                    FontSize="12" BorderThickness="0"
                                    SelectionMode="Single"
                                    DoubleTapped="OnDriveDoubleTapped"
                                    ContextMenu="{StaticResource DriveContextMenu}">
                            
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="Ð˜Ð¼Ñ" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ’½" 
                                                        Margin="0,0,8,0"/>
                                                <TextBlock Text="{Binding Name}" 
                                                        TextTrimming="CharacterEllipsis"
                                                        VerticalAlignment="Center"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                
                                <DataGridTextColumn Header="Ð¢Ð¸Ð¿" Width="140" 
                                                    Binding="{Binding Type}"/>
                                
                                <DataGridTextColumn Header="Ð’ÑÐµÐ³Ð¾ Ð¼ÐµÑÑ‚Ð°" Width="120" 
                                                    Binding="{Binding TotalSize, Converter={StaticResource FileSizeConverter}}"/>
                                
                                <DataGridTextColumn Header="Ð¡Ð²Ð¾Ð±Ð¾Ð´Ð½Ð¾" Width="120" 
                                                    Binding="{Binding FreeSpace, Converter={StaticResource FileSizeConverter}}"/>
                                
                                <DataGridTextColumn Header="Ð¤Ð°Ð¹Ð»Ð¾Ð²Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°" Width="120" 
                                                    Binding="{Binding DriveFormat}"/>
                            </DataGrid.Columns>
                        </DataGrid>
                        
                        <!-- Grid Ð´Ð»Ñ Ð²Ð¸Ð´Ð° ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ð¼Ð¸ Ð·Ð½Ð°Ñ‡ÐºÐ°Ð¼Ð¸ -->
                        <ScrollViewer x:Name="DrivesIconsScrollViewer"
                                    IsVisible="{Binding IsIconsView}">
                            <ItemsControl x:Name="DrivesIconsControl" 
                                        ItemsSource="{Binding DriveItems}"
                                        Margin="20,20">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Width="120" Height="140" 
                                                Classes="card" 
                                                Margin="10" 
                                                Padding="10"
                                                Background="Transparent"
                                                CornerRadius="5"
                                                Cursor="Hand"
                                                DoubleTapped="OnDriveDoubleTapped"
                                                ContextMenu="{StaticResource DriveContextMenu}"
                                                IsVisible="{Binding IsVisible}"> 
                                            <Border.Styles>
                                                <Style Selector="Border:pointerover">
                                                    <Setter Property="Background" Value="#F5F9FF"/>
                                                    <Setter Property="BorderBrush" Value="#CCE5FF"/>
                                                    <Setter Property="BorderThickness" Value="1"/>
                                                </Style>
                                            </Border.Styles>
                                            <StackPanel>
                                                <TextBlock Text="ðŸ’½" 
                                                        FontSize="32" 
                                                        HorizontalAlignment="Center"
                                                        Margin="0,0,0,5"/>
                                                <TextBlock Text="{Binding Name}" 
                                                        TextWrapping="Wrap"
                                                        TextAlignment="Center"
                                                        MaxWidth="100"
                                                        Margin="0,0,0,5"
                                                        FontSize="11"
                                                        FontWeight="SemiBold"/>
                                                <ProgressBar Value="{Binding UsagePercentage}" 
                                                            Maximum="100"
                                                            Height="8"
                                                            Margin="10,5"
                                                            Background="#E0E0E0"
                                                            Foreground="#0078D7"/>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding FreeSpace, Converter={StaticResource FileSizeConverter}}" 
                                                            FontSize="9"
                                                            Foreground="Green"
                                                            HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Ð¸Ð· {Binding TotalSize, Converter={StaticResource FileSizeConverter}}" 
                                                            FontSize="9"
                                                            Foreground="Gray"
                                                            HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Border>
            
            <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ (Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€) -->
            <Border Grid.Column="2" Background="#F0F0F0" BorderThickness="1,0,0,0" BorderBrush="#E5E5E5">
                <Grid Background="#F0F0F0">
                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° -->
                    <Border Height="40" Background="#F0F0F0" BorderThickness="0,0,0,1" BorderBrush="#E5E5E5">
                        <TextBlock Text="ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€" 
                                FontSize="13" FontWeight="Bold"
                                VerticalAlignment="Center"
                                Margin="15,0"/>
                    </Border>
                    
                    <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ -->
                    <Grid Margin="0,40,0,0" Background="#F0F0F0">
                        
                        <!-- 1. ÐŸÐ Ð•Ð”ÐŸÐ ÐžÐ¡ÐœÐžÐ¢Ð  Ð¤ÐÐ™Ð›Ð  -->
                        <Border x:Name="FilePreviewBorder" 
                                Background="White"
                                Margin="10"
                                CornerRadius="4"
                                BorderBrush="#E5E5E5"
                                BorderThickness="1"
                                IsVisible="{Binding ShowFilePreview}">
                            <ScrollViewer>
                                <StackPanel Margin="15" Spacing="10">
                                    <!-- ÐœÐ¸Ð½Ð¸Ð°Ñ‚ÑŽÑ€Ð°/Ð¸ÐºÐ¾Ð½ÐºÐ° Ñ„Ð°Ð¹Ð»Ð° -->
                                    <Border Background="White" 
                                            HorizontalAlignment="Center"
                                            Margin="0,10">
                                        <ContentControl x:Name="PreviewContentControl"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>

                                    <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ„Ð°Ð¹Ð»Ðµ -->
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="{Binding SelectedItem.Name}" 
                                                FontSize="14" FontWeight="SemiBold"
                                                TextWrapping="Wrap"
                                                MaxWidth="250"
                                                TextAlignment="Center"/>
                                        
                                        <TextBlock Text="{Binding SelectedItem.Type}" 
                                                FontSize="12" 
                                                Foreground="#666666"
                                                TextAlignment="Center"/>
                                        
                                        <TextBlock Text="{Binding SelectedItem.SizeDisplay}" 
                                                FontSize="12" 
                                                Foreground="#666666"
                                                TextAlignment="Center"/>
                                    </StackPanel>

                                    <!-- Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²) -->
                                    <StackPanel Margin="0,15,0,0" Spacing="5">
                                        <Button Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ" 
                                                Click="OnOpenClick"
                                                Padding="8,4"
                                                FontSize="11"
                                                HorizontalAlignment="Stretch"/>
                                    </StackPanel>
                                </StackPanel>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>